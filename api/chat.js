import fetch from 'node-fetch';

export default async function handler(req, res) {
  // CORS headers
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'POST, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type');

  if (req.method === 'OPTIONS') {
    return res.status(200).end();
  }

  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  try {
    const { message } = req.body;

    if (!message) {
      return res.status(400).json({ error: 'Message is required' });
    }

    console.log('Received message:', message);

    // –ü—Ä–æ–±—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DeepSeek API –µ—Å–ª–∏ –∫–ª—é—á –µ—Å—Ç—å
    const DEEPSEEK_API_KEY = process.env.DEEPSEEK_API_KEY;
    let reply;
    let source = 'local';

    if (DEEPSEEK_API_KEY) {
      try {
        const response = await fetch('https://api.deepseek.com/v1/chat/completions', {
          method: 'POST',
          headers: {
            'Authorization': `Bearer ${DEEPSEEK_API_KEY}`,
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            model: 'deepseek-chat',
            messages: [
              {
                role: 'system',
                content: `–¢—ã AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ –æ –≤–∞—Ö—Ç–æ–≤–æ–π —Ä–∞–±–æ—Ç–µ. 
                –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ, –¥—Ä—É–∂–µ–ª—é–±–Ω–æ, –≤–µ–¥–∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –¥–∏–∞–ª–æ–≥.
                –û—Å–Ω–æ–≤–Ω–∞—è –≤–∞–∫–∞–Ω—Å–∏—è: –∏–∑–æ–ª–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ —Ç—Ä—É–±–æ–ø—Ä–æ–≤–æ–¥–∞.
                –ü—Ä–µ–¥–ª–∞–≥–∞–π –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è, –∑–∞–¥–∞–≤–∞–π –≤—Å—Ç—Ä–µ—á–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã.
                –ë—É–¥—å –ø–æ–ª–µ–∑–Ω—ã–º –∏ –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.`
              },
              {
                role: 'user',
                content: message
              }
            ],
            max_tokens: 300,
            temperature: 0.8
          })
        });

        if (response.ok) {
          const result = await response.json();
          reply = result.choices[0]?.message?.content;
          source = 'deepseek-api';
          console.log('Successfully used DeepSeek API');
        } else {
          console.log('DeepSeek API failed, using local responses');
          reply = getLocalResponse(message);
        }
      } catch (apiError) {
        console.log('DeepSeek API error, using local responses:', apiError.message);
        reply = getLocalResponse(message);
      }
    } else {
      console.log('No API key, using local responses');
      reply = getLocalResponse(message);
    }

    return res.status(200).json({
      reply: reply,
      success: true,
      source: source
    });

  } catch (error) {
    console.error('Server error:', error);
    return res.status(500).json({ 
      error: 'Internal server error'
    });
  }
}

function getLocalResponse(message) {
  const userMessage = message.toLowerCase().trim();
  
  // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –∏ –Ω–∞—á–∞–ª–æ –¥–∏–∞–ª–æ–≥–∞
  if (userMessage.includes('–ø—Ä–∏–≤–µ—Ç') || userMessage.includes('–∑–¥—Ä–∞–≤—Å—Ç–≤') || userMessage.includes('hello') || userMessage.includes('hi') || userMessage === 'start') {
    return `üëã –ü—Ä–∏–≤–µ—Ç! –†–∞–¥ –≤–∞—Å –≤–∏–¥–µ—Ç—å!

–Ø –ø–æ–º–æ—â–Ω–∏–∫ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ ¬´–£—Ñ–∞ –†–∞–±–æ—Ç–∞ –í–∞—Ö—Ç–∞ –ë–∞—à–∫–∏—Ä–∏—è¬ª.

–£ –Ω–∞—Å –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –≤–∞–∫–∞–Ω—Å–∏—è ‚Äî –∏–∑–æ–ª–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ —Ç—Ä—É–±–æ–ø—Ä–æ–≤–æ–¥–∞. –≠—Ç–æ —Ä–∞–±–æ—Ç–∞ —Å –æ–±—É—á–µ–Ω–∏–µ–º —Å –Ω—É–ª—è!

–ß—Ç–æ –±—ã –≤—ã —Ö–æ—Ç–µ–ª–∏ —É–∑–Ω–∞—Ç—å? –ù–∞–ø—Ä–∏–º–µ—Ä:
‚Ä¢ üè¢ –£—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã –∏ –∑–∞—Ä–ø–ª–∞—Ç–∞
‚Ä¢ üìÖ –ì—Ä–∞—Ñ–∏–∫ –≤–∞—Ö—Ç—ã  
‚Ä¢ üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º
‚Ä¢ üéì –û–±—É—á–µ–Ω–∏–µ —Å –Ω—É–ª—è
‚Ä¢ üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

–í—ã–±–∏—Ä–∞–π—Ç–µ ‚Äî —Ä–∞—Å—Å–∫–∞–∂—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ! üòä`;
  }
  
  // –í–∞–∫–∞–Ω—Å–∏—è - –æ—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
  if (userMessage.includes('–≤–∞–∫–∞–Ω—Å') || userMessage.includes('—Ä–∞–±–æ—Ç–∞') || userMessage.includes('–∏–∑–æ–ª–∏—Ä–æ–≤') || userMessage.includes('—á–µ–º –∑–∞–Ω–∏–º–∞')) {
    return `üë∑‚Äç‚ôÇ –û—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä! –í–∞–∫–∞–Ω—Å–∏—è: **–ò–∑–æ–ª–∏—Ä–æ–≤—â–∏–∫ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ —Ç—Ä—É–±–æ–ø—Ä–æ–≤–æ–¥–∞**

üíµ **–ó–∞—Ä–ø–ª–∞—Ç–∞:** –æ—Ç 116 550 ‚ÇΩ + –ø—Ä–µ–º–∏–∏
üìÖ **–ì—Ä–∞—Ñ–∏–∫:** –≤–∞—Ö—Ç–∞ 60 —Å–º–µ–Ω

üéØ **–ß–µ–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –∏–∑–æ–ª–∏—Ä–æ–≤—â–∏–∫:**
‚Ä¢ –ú–æ–Ω—Ç–∞–∂ —Ç–µ–ø–ª–æ–∏–∑–æ–ª—è—Ü–∏–∏ –Ω–∞ —Ç—Ä—É–±–æ–ø—Ä–æ–≤–æ–¥–∞—Ö
‚Ä¢ –†–∞–±–æ—Ç–∞ —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏
‚Ä¢ –†–∞–±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ –Ω–∞ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞—Ö

‚ú® **–ü–ª—é—Å—ã:**
‚Ä¢ –û–±—É—á–µ–Ω–∏–µ —Å –Ω—É–ª—è ‚Äî –≤—Å–µ–º—É –Ω–∞—É—á–∏–º!
‚Ä¢ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ 
‚Ä¢ –ö–∞—Ä—å–µ—Ä–Ω—ã–π —Ä–æ—Å—Ç –¥–æ –±—Ä–∏–≥–∞–¥–∏—Ä–∞

–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –æ–± —É—Å–ª–æ–≤–∏—è—Ö –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö?`;
  }
  
  // –£—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã
  if (userMessage.includes('—É—Å–ª–æ–≤') || userMessage.includes('–ø—Ä–æ–∂–∏–≤–∞–Ω') || userMessage.includes('–ø–∏—Ç–∞–Ω–∏–µ') || userMessage.includes('—Å–æ—Ü–ø–∞–∫–µ—Ç') || userMessage.includes('—á—Ç–æ –≤—Ö–æ–¥–∏—Ç')) {
    return `üè† **–û—Ç–ª–∏—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã:**

‚úÖ –ü—Ä–æ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º
‚úÖ 3-—Ä–∞–∑–æ–≤–æ–µ –≥–æ—Ä—è—á–µ–µ –ø–∏—Ç–∞–Ω–∏–µ
‚úÖ –ü—Ä–æ–µ–∑–¥ –æ–ø–ª–∞—á–∏–≤–∞–µ–º (–¥–æ–º-–æ–±—ä–µ–∫—Ç-–¥–æ–º)
‚úÖ –ú–µ–¥–∫–æ–º–∏—Å—Å–∏—è –∑–∞ –Ω–∞—à —Å—á–µ—Ç
‚úÖ –°–ø–µ—Ü–æ–¥–µ–∂–¥–∞ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞—Ä–ø–ª–∞—Ç–∞

üí° –≠—Ç–æ –≤–∞–∫–∞–Ω—Å–∏—è –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ ‚Äî –æ–Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞ –∏ —Ä–µ–∞–ª—å–Ω–∞! –í —Å–∫–æ—Ä–æ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–æ–±–∞–≤–∏–º –µ—â–µ –≤–∞–∫–∞–Ω—Å–∏–∏.

–ò–Ω—Ç–µ—Ä–µ—Å—É—é—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞–º?`;
  }
  
  // –ó–∞—Ä–ø–ª–∞—Ç–∞
  if (userMessage.includes('–∑–∞—Ä–ø–ª–∞—Ç') || userMessage.includes('–æ–ø–ª–∞—Ç') || userMessage.includes('–¥–æ—Ö–æ–¥') || userMessage.includes('–∑–∞—Ä–∞–±') || userMessage.includes('–¥–µ–Ω—å–≥')) {
    return `üíµ **–ü–æ –∑–∞—Ä–ø–ª–∞—Ç–µ –≤—Å–µ —á–µ—Ç–∫–æ:**

‚Ä¢ –û—Ç 116 550 —Ä—É–±–ª–µ–π –≤ –º–µ—Å—è—Ü
‚Ä¢ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è (–±–µ–ª–∞—è) –∑–∞—Ä–ø–ª–∞—Ç–∞
‚Ä¢ –ü—Ä–µ–º–∏–∏ –∑–∞ —Ö–æ—Ä–æ—à—É—é —Ä–∞–±–æ—Ç—É
‚Ä¢ –í—ã–ø–ª–∞—Ç—ã 2 —Ä–∞–∑–∞ –≤ –º–µ—Å—è—Ü
‚Ä¢ –í—Å–µ –≤–æ–≤—Ä–µ–º—è –∏ –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫

üí∞ –≠—Ç–æ —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –¥–æ—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Ä–∞—Å—Ç–∏ —Å –æ–ø—ã—Ç–æ–º!

–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –ø—Ä–æ –≥—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã?`;
  }
  
  // –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã
  if (userMessage.includes('–≥—Ä–∞—Ñ–∏–∫') || userMessage.includes('—Å–º–µ–Ω') || userMessage.includes('—Ä–µ–∂–∏–º') || userMessage.includes('–≤–∞—Ö—Ç') || userMessage.includes('—Å–∫–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–∞')) {
    return `üìÖ **–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã ‚Äî –≤–∞—Ö—Ç–æ–≤—ã–π:**

‚Ä¢ 60 —Ä–∞–±–æ—á–∏—Ö —Å–º–µ–Ω
‚Ä¢ –ú–æ–∂–Ω–æ –ø—Ä–æ–¥–ª–∏—Ç—å –ø–æ –∂–µ–ª–∞–Ω–∏—é
‚Ä¢ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å
‚Ä¢ –û—Ç–¥—ã—Ö –º–µ–∂–¥—É –≤–∞—Ö—Ç–∞–º–∏

üïí –í—Å—ë —á–µ—Ç–∫–æ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É, –±–µ–∑ —Å—é—Ä–ø—Ä–∏–∑–æ–≤!

–†–∞—Å—Å–∫–∞–∑–∞—Ç—å –ø—Ä–æ –æ–±—É—á–µ–Ω–∏–µ —Å –Ω—É–ª—è?`;
  }
  
  // –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
  if (userMessage.includes('—Ç—Ä–µ–±–æ–≤–∞–Ω') || userMessage.includes('–Ω—É–∂–Ω') || userMessage.includes('–Ω–µ–æ–±—Ö–æ–¥') || userMessage.includes('–æ–ø—ã—Ç') || userMessage.includes('–∫—Ç–æ –º–æ–∂–µ—Ç')) {
    return `üìã **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Å—Ç—ã–µ:**

‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å –≤–∞—Ö—Ç–æ–π
‚úÖ –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ
‚úÖ –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
‚úÖ –í–æ–∑—Ä–∞—Å—Ç –æ—Ç 18 –ª–µ—Ç
‚úÖ –ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ –†–§

üéì **–û–ø—ã—Ç –ù–ï –Ω—É–∂–µ–Ω** ‚Äî –≤—Å–µ–º—É –Ω–∞—É—á–∏–º!
üö´ **–ú–µ–¥–ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è** ‚Äî –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å

–ò–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç, –∫–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã?`;
  }
  
  // –û–±—É—á–µ–Ω–∏–µ
  if (userMessage.includes('–æ–±—É—á–µ–Ω') || userMessage.includes('—Å –Ω—É–ª—è') || userMessage.includes('–Ω–∞—É—á–∏—Ç—å') || userMessage.includes('–∫—É—Ä—Å') || userMessage.includes('—É—á–∏—Ç—å—Å—è')) {
    return `üéì **–û–±—É—á–µ–Ω–∏–µ ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ!**

üìö 6-7 –¥–Ω–µ–π –≤ –£—á–µ–±–Ω–æ–º –¶–µ–Ω—Ç—Ä–µ (–ú—ã—Ç–∏—â–∏)
üõ† –¢–µ–æ—Ä–∏—è + –ø—Ä–∞–∫—Ç–∏–∫–∞ —Ç–µ–ø–ª–æ–∏–∑–æ–ª—è—Ü–∏–∏
üí∞ –í—Å–µ —Ä–∞—Å—Ö–æ–¥—ã –∑–∞ –Ω–∞—à —Å—á–µ—Ç
üéØ –ó–∞—Ç–µ–º ‚Äî —Å—Ä–∞–∑—É –Ω–∞ –æ–±—ä–µ–∫—Ç —Å –∑–∞—Ä–ø–ª–∞—Ç–æ–π

üí° –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞ –∫–∞—Ä—å–µ—Ä—ã!

–£–∑–Ω–∞—Ç—å –ø—Ä–æ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞?`;
  }
  
  // –î–æ–∫—É–º–µ–Ω—Ç—ã
  if (userMessage.includes('–¥–æ–∫—É–º–µ–Ω—Ç') || userMessage.includes('–ø–∞—Å–ø–æ—Ä—Ç') || userMessage.includes('—Å–Ω–∏–ª—Å') || userMessage.includes('–∏–Ω–Ω') || userMessage.includes('—Ç—Ä—É–¥–æ–≤–∞—è') || userMessage.includes('—á—Ç–æ –Ω—É–∂–Ω–æ')) {
    return `üìÑ **–î–æ–∫—É–º–µ–Ω—Ç—ã —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ:**

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
‚Ä¢ –ü–∞—Å–ø–æ—Ä—Ç –†–§
‚Ä¢ –°–ù–ò–õ–°
‚Ä¢ –ò–ù–ù
‚Ä¢ –¢—Ä—É–¥–æ–≤–∞—è –∫–Ω–∏–∂–∫–∞

üíä –ú–µ–¥–∫–æ–º–∏—Å—Å–∏—é –ø—Ä–æ—Ö–æ–¥–∏–º –±–µ—Å–ø–ª–∞—Ç–Ω–æ!

üìû –ù—É–∂–Ω—ã –∫–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Å–≤—è–∑–∏?`;
  }
  
  // –ö–æ–Ω—Ç–∞–∫—Ç—ã
  if (userMessage.includes('–∫–æ–Ω—Ç–∞–∫—Ç') || userMessage.includes('—Ç–µ–ª–µ—Ñ–æ–Ω') || userMessage.includes('–∑–≤–æ–Ω') || userMessage.includes('—Å–≤—è–∑—å') || userMessage.includes('–ø–æ–∑–≤–æ–Ω–∏—Ç—å') || userMessage.includes('–∫–∞–∫ —Å–≤—è–∑–∞—Ç—å—Å—è')) {
    return `üìû **–ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:**

–¢–µ–ª–µ—Ñ–æ–Ω: 8-960-999-51-14 (–ú–∞—Ö)

üí¨ **–ò–ª–∏ –ø–∏—à–∏—Ç–µ –≤ –Ω–∞—à–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ** ‚Äî —Ç–∞–º –ø–æ–º–æ–≥—É—Ç —Å –ª—é–±—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏!

üè¢ **–î–ª—è —Ä–µ–∫—Ä—É—Ç–µ—Ä–æ–≤:** –º—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –≤–∞—à–∏ –≤–∞–∫–∞–Ω—Å–∏–∏ –≤ –Ω–∞—à–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ.

–ï—Å—Ç—å –µ—â–µ –≤–æ–ø—Ä–æ—Å—ã? üòä`;
  }
  
  // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ
  if (userMessage.includes('—Å–æ–æ–±—â–µ—Å—Ç–≤–æ') || userMessage.includes('—É—Ñ–∞ —Ä–∞–±–æ—Ç') || userMessage.includes('–±–∞—à–∫–∏—Ä–∏—è') || userMessage.includes('–æ –≤–∞—Å') || userMessage.includes('–∫—Ç–æ –≤—ã')) {
    return `üè¢ **–û –Ω–∞—à–µ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ:**

–ú—ã –ø–æ–º–æ–≥–∞–µ–º —Å —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º –≤ –£—Ñ–µ –∏ –ë–∞—à–∫–∏—Ä–∏–∏. –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—Å—è –Ω–∞ –≤–∞—Ö—Ç–æ–≤–æ–π —Ä–∞–±–æ—Ç–µ.

üíº **–î–ª—è —Å–æ–∏—Å–∫–∞—Ç–µ–ª–µ–π:** —Ä–µ–∞–ª—å–Ω—ã–µ –≤–∞–∫–∞–Ω—Å–∏–∏
üëî **–î–ª—è —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–π:** —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–π

üí¨ –ü–∏—à–∏—Ç–µ –Ω–∞–º ‚Äî –≤—Å–µ–≥–¥–∞ –Ω–∞ —Å–≤—è–∑–∏!

–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –æ —Ç–µ–∫—É—â–µ–π –≤–∞–∫–∞–Ω—Å–∏–∏?`;
  }
  
  // –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
  if (userMessage.includes('—Å–ø–∞—Å') || userMessage.includes('–±–ª–∞–≥–æ–¥–∞—Ä') || userMessage.includes('thank') || userMessage.includes('–ø–∞—Å–∏–±')) {
    return `üòä –í—Å–µ–≥–¥–∞ —Ä–∞–¥ –ø–æ–º–æ—á—å! 

–ï—Å–ª–∏ –±—É–¥—É—Ç –µ—â–µ –≤–æ–ø—Ä–æ—Å—ã ‚Äî –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å!

–£–¥–∞—á–∏ –≤ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ! üçÄ`;
  }
  
  // –ü—Ä–æ—â–∞–Ω–∏—è
  if (userMessage.includes('–ø–æ–∫–∞') || userMessage.includes('–¥–æ —Å–≤–∏–¥–∞–Ω') || userMessage.includes('bye') || userMessage.includes('–ø—Ä–æ—â')) {
    return `üëã –î–æ —Å–≤–∏–¥–∞–Ω–∏—è! 

–ó–∞—Ö–æ–¥–∏—Ç–µ –µ—â–µ ‚Äî –≤—Å–µ–≥–¥–∞ –ø–æ–º–æ–≥—É —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –≤–∞–∫–∞–Ω—Å–∏—è—Ö!

–•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è! üòä`;
  }
  
  // –û–ë–†–ê–ë–û–¢–ö–ê –ù–ï–ò–ó–í–ï–°–¢–ù–´–• –í–û–ü–†–û–°–û–í
  const fallbackResponses = [
    `ü§î –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å!

–ï—Å–ª–∏ —á–µ—Å—Ç–Ω–æ, —è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏–∏ –∏–∑–æ–ª–∏—Ä–æ–≤—â–∏–∫–∞ –∏ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. 

–ú–æ–∂–µ—Ç, —Å–ø—Ä–æ—Å–∏—Ç–µ –æ:
‚Ä¢ –£—Å–ª–æ–≤–∏—è—Ö —Ä–∞–±–æ—Ç—ã
‚Ä¢ –ó–∞—Ä–ø–ª–∞—Ç–µ –∏ –≥—Ä–∞—Ñ–∏–∫–µ
‚Ä¢ –û–±—É—á–µ–Ω–∏–∏ —Å –Ω—É–ª—è
‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ö

–ò–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –≤ –Ω–∞—à–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ ‚Äî —Ç–∞–º —Ç–æ—á–Ω–æ –ø–æ–º–æ–≥—É—Ç! üí¨`,

    `üéØ –•–º, —Ö–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å!

–Ø –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ä–∞–∑–±–∏—Ä–∞—é—Å—å –≤ –≤–∞–∫–∞–Ω—Å–∏—è—Ö –∏ —Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ. 

–ú–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –ø—Ä–æ:
üè¢ –£—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã –∏–∑–æ–ª–∏—Ä–æ–≤—â–∏–∫–∞
üíµ –ó–∞—Ä–ø–ª–∞—Ç—É –∏ –≥—Ä–∞—Ñ–∏–∫
üéì –ë–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ

–ò–ª–∏ —Å–ø—Ä–æ—Å–∏—Ç–µ —É –Ω–∞—à–µ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ ‚Äî –æ–Ω–∏ —ç–∫—Å–ø–µ—Ä—Ç—ã! üí¨`
  ];
  
  return fallbackResponses[Math.floor(Math.random() * fallbackResponses.length)];
}
